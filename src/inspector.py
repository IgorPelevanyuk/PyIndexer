import pymongo
#
# This module is supposed to help to remove endings from words
#
IRREGULAR = {'abided': 'abide',
 'abode': 'abide',
 'arisen': 'arise',
 'arose': 'arise',
 'ate': 'eat',
 'awakened': 'awake',
 'awoke': 'awake',
 'awoken': 'awake',
 'backslid': 'backslide',
 'backslidden': 'backslide',
 'bade': 'bid',
 'beat': 'beat',
 'beaten': 'beat',
 'became': 'become',
 'become': 'become',
 'been': 'be',
 'began': 'begin',
 'begun': 'begin',
 'bent': 'bend',
 'bet': 'bet',
 'betted': 'bet',
 'bid': 'bid',
 'bidden': 'bid',
 'bit': 'bite',
 'bitten': 'bite',
 'bled': 'bleed',
 'blew': 'blow',
 'blown': 'blow',
 'bore': 'bear',
 'born': 'bear',
 'borne': 'bear',
 'bought': 'buy',
 'bound': 'bind',
 'bred': 'breed',
 'broadcast': 'broadcast',
 'broadcasted': 'broadcast',
 'broke': 'break',
 'broken': 'break',
 'brought': 'bring',
 'browbeat': 'browbeat',
 'browbeaten': 'browbeat',
 'built': 'build',
 'burned': 'burn',
 'burnt': 'burn',
 'burst': 'burst',
 'bust': 'bust',
 'busted': 'bust',
 'came': 'come',
 'cast': 'cast',
 'caught': 'catch',
 'chose': 'choose',
 'chosen': 'choose',
 'clad': 'clothe',
 'clothed': 'clothe',
 'clung': 'cling',
 'come': 'come',
 'cost': 'cost',
 'could': 'can',
 'crept': 'creep',
 'cut': 'cut',
 'dealt': 'deal',
 'did': 'do',
 'dived': 'dive',
 'done': 'do',
 'dove': 'dive',
 'drank': 'drink',
 'drawn': 'draw',
 'dreamed': 'dream',
 'dreamt': 'dream',
 'drew': 'draw',
 'driven': 'drive',
 'drove': 'drive',
 'drunk': 'drink',
 'dug': 'dig',
 'dwelled': 'dwell',
 'dwelt': 'dwell',
 'eaten': 'eat',
 'fallen': 'fall',
 'fed': 'feed',
 'fell': 'fall',
 'felt': 'feel',
 'fit': 'fit',
 'fled': 'flee',
 'flew': 'fly',
 'flown': 'fly',
 'flung': 'fling',
 'forbade': 'forbid',
 'forbidden': 'forbid',
 'forecast': 'forecast',
 'foresaw': 'foresee',
 'foreseen': 'foresee',
 'foretold': 'foretell',
 'forgave': 'forgive',
 'forgiven': 'forgive',
 'forgot': 'forget',
 'forgotten': 'forget',
 'forsaken': 'forsake',
 'forsook': 'forsake',
 'fought': 'fight',
 'found': 'find',
 'froze': 'freeze',
 'frozen': 'freeze',
 'gave': 'give',
 'given': 'give',
 'gone': 'go',
 'got': 'get',
 'gotten': 'get',
 'grew': 'grow',
 'ground': 'grind',
 'grown': 'grow',
 'had': 'have, has',
 'hanged': 'hang',
 'heard': 'hear',
 'held': 'hold',
 'hewed': 'hew',
 'hewn': 'hew',
 'hid': 'hide',
 'hidden': 'hide',
 'hit': 'hit',
 'hung': 'hang',
 'hurt': 'hurt',
 'inlaid': 'inlay',
 'input': 'input',
 'inputted': 'input',
 'interwove': 'interweave',
 'interwoven': 'interweave',
 'kept': 'keep',
 'kneeled': 'kneel',
 'knelt': 'kneel',
 'knew': 'know',
 'knit': 'knit',
 'knitted': 'knit',
 'known': 'know',
 'laid': 'lay',
 'lain': 'lie',
 'lay': 'lie',
 'leaned': 'lean',
 'leant': 'lean',
 'leaped': 'leap',
 'leapt': 'leap',
 'learned': 'learn',
 'learnt': 'learn',
 'led': 'lead',
 'left': 'leave',
 'lent': 'lend',
 'let': 'let',
 'lighted': 'light',
 'lit': 'light',
 'lost': 'lose',
 'made': 'make',
 'meant': 'mean',
 'met': 'meet',
 'might': 'may',
 'miscast': 'miscast',
 'misdealt': 'misdeal',
 'misdid': 'misdo',
 'misdone': 'misdo',
 'misgave': 'misgive',
 'misgiven': 'misgive',
 'misheard': 'mishear',
 'mishit': 'mishit',
 'mislaid': 'mislay',
 'misled': 'mislead',
 'misread': 'misread',
 'misspelled': 'misspell',
 'misspelt': 'misspell',
 'misspent': 'misspend',
 'mistaken': 'mistake',
 'mistook': 'mistake',
 'misunderstood': 'misunderstand',
 'mowed': 'mow',
 'mown': 'mow',
 'offset': 'offset',
 'outbid': 'outbid',
 'outdid': 'outdo',
 'outdone': 'outdo',
 'outfought': 'outfight',
 'outgrew': 'outgrow',
 'outgrown': 'outgrow',
 'output': 'output',
 'outputted': 'output',
 'outran': 'outrun',
 'outrun': 'outrun',
 'outshone': 'outshine',
 'outsold': 'outsell',
 'overate': 'overeat',
 'overbid': 'overbid',
 'overcame': 'overcome',
 'overcome': 'overcome',
 'overdid': 'overdo',
 'overdone': 'overdo',
 'overdrawn': 'overdraw',
 'overdrew': 'overdraw',
 'overeaten': 'overeat',
 'overflew': 'overfly',
 'overflown': 'overfly',
 'overheard': 'overhear',
 'overhung': 'overhang',
 'overlaid': 'overlay',
 'overpaid': 'overpay',
 'overran': 'overrun',
 'overridden': 'override',
 'overrode': 'override',
 'overrun': 'overrun',
 'oversaw': 'oversee',
 'overseen': 'oversee',
 'overshot': 'overshoot',
 'overslept': 'oversleep',
 'overtaken': 'overtake',
 'overthrew': 'overthrow',
 'overthrown': 'overthrow',
 'overtook': 'overtake',
 'paid': 'pay',
 'partaken': 'partake',
 'partook': 'partake',
 'pleaded': 'plead',
 'pled': 'plead',
 'prepaid': 'prepay',
 'proved': 'prove',
 'proven': 'prove',
 'put': 'put',
 'quit': 'quit',
 'quitted': 'quit',
 'ran': 'run',
 'rang': 'ring',
 'read': 'read',
 'rebound': 'rebind',
 'rebuilt': 'rebuild',
 'recast': 'recast',
 'redid': 'redo',
 'redone': 'redo',
 'reheard': 'rehear',
 'remade': 'remake',
 'rent': 'rend',
 'repaid': 'repay',
 'reran': 'rerun',
 'rerun': 'rerun',
 'resat': 'resit',
 'reset': 'reset',
 'resold': 'resell',
 'retaken': 'retake',
 'retold': 'retell',
 'retook': 'retake',
 'rewritten': 'rewrite',
 'rewrote': 'rewrite',
 'rid': 'rid',
 'ridden': 'ride',
 'risen': 'rise',
 'rode': 'ride',
 'rose': 'rise',
 'run': 'run',
 'rung': 'ring',
 'said': 'say',
 'sang': 'sing',
 'sank': 'sink',
 'sat': 'sit',
 'saw': 'see',
 'sawed': 'saw',
 'sawn': 'saw',
 'seen': 'see',
 'sent': 'send',
 'set': 'set',
 'sewed': 'sew',
 'sewn': 'sew',
 'shaken': 'shake',
 'shaved': 'shave',
 'shaven': 'shave',
 'sheared': 'shear',
 'shed': 'shed',
 'shined': 'shine',
 'shone': 'shine',
 'shook': 'shake',
 'shorn': 'shear',
 'shot': 'shoot',
 'showed': 'show',
 'shown': 'show',
 'shrank': 'shrink',
 'shrunk': 'shrink',
 'shut': 'shut',
 'slain': 'slay',
 'slayed': 'slay',
 'slept': 'sleep',
 'slew': 'slay',
 'slid': 'slide',
 'slit': 'slit',
 'slung': 'sling',
 'slunk': 'slink',
 'smelled': 'smell',
 'smelt': 'smell',
 'sneaked': 'sneak',
 'snuck': 'sneak',
 'sold': 'sell',
 'sought': 'seek',
 'sowed': 'sow',
 'sown': 'sow',
 'spat': 'spit',
 'sped': 'speed',
 'speeded': 'speed',
 'spelled': 'spell',
 'spelt': 'spell',
 'spent': 'spend',
 'spilled': 'spill',
 'spilt': 'spill',
 'spit': 'spit',
 'split': 'split',
 'spoiled': 'spoil',
 'spoilt': 'spoil',
 'spoke': 'speak',
 'spoken': 'speak',
 'sprang': 'spring',
 'spread': 'spread',
 'sprung': 'spring',
 'spun': 'spin',
 'stank': 'stink',
 'stole': 'steal',
 'stolen': 'steal',
 'stood': 'stand',
 'strewed': 'strew',
 'strewn': 'strew',
 'stridden': 'stride',
 'strived': 'strive',
 'striven': 'strive',
 'strode': 'stride',
 'strove': 'strive',
 'struck': 'strike',
 'strung': 'string',
 'stuck': 'stick',
 'stung': 'sting',
 'stunk': 'stink',
 'sublet': 'sublet',
 'sung': 'sing',
 'sunk': 'sink',
 'swam': 'swim',
 'swelled': 'swell',
 'swept': 'sweep',
 'swollen': 'swell',
 'swore': 'swear',
 'sworn': 'swear',
 'swum': 'swim',
 'swung': 'swing',
 'taken': 'take',
 'taught': 'teach',
 'thought': 'think',
 'threw': 'throw',
 'thrown': 'throw',
 'thrust': 'thrust',
 'told': 'tell',
 'took': 'take',
 'tore': 'tear',
 'torn': 'tear',
 'trod': 'tread',
 'trodden': 'tread',
 'unbent': 'unbend',
 'underbid': 'underbid',
 'undercut': 'undercut',
 'undergone': 'undergo',
 'underlain': 'underlie',
 'underlay': 'underlie',
 'underpaid': 'underpay',
 'undersold': 'undersell',
 'understood': 'understand',
 'undertaken': 'undertake',
 'undertook': 'undertake',
 'underwent': 'undergo',
 'underwritten': 'underwrite',
 'underwrote': 'underwrite',
 'undid': 'undo',
 'undone': 'undo',
 'unfroze': 'unfreeze',
 'unfrozen': 'unfreeze',
 'unsaid': 'unsay',
 'unwound': 'unwind',
 'upheld': 'uphold',
 'upset': 'upset',
 'waked': 'wake',
 'was, were': 'be',
 'waylaid': 'waylay',
 'weaved': 'weave',
 'wed': 'wed',
 'wedded': 'wed',
 'went': 'go',
 'wept': 'weep',
 'wet': 'wet',
 'wetted': 'wet',
 'withdrawn': 'withdraw',
 'withdrew': 'withdraw',
 'withheld': 'withhold',
 'withstood': 'withstand',
 'woke': 'wake',
 'woken': 'wake',
 'won': 'win',
 'wore': 'wear',
 'worn': 'wear',
 'wound': 'wind',
 'wove': 'weave',
 'woven': 'weave',
 'written': 'write',
 'wrote': 'write',
 'wrung': 'wring'}

RULES = [# Plural
         {'ending':'ses', 'correction':'s'},
         {'ending':'xes', 'correction':'x'},
         {'ending':'shes', 'correction':'sh'},
         {'ending':'ches', 'correction':'ch'},
         # ------
         {'ending':'ies', 'correction':'y'},
         {'ending':'oes', 'correction':'o'},
         {'ending':'ves', 'correction':'f'},
         {'ending':'s', 'correction':''},
         # ED
         {'ending':'??ed', 'correction':'?'},
         {'ending':'ied', 'correction':'y'},
         {'ending':'ed', 'correction':'e'},
         {'ending':'ed', 'correction':''},
         # ING
         {'ending':'ying', 'correction':'ie'},
         {'ending':'??ing', 'correction':'?'},
         {'ending':'ing', 'correction':'e'},
         {'ending':'ing', 'correction':''},
         ]

def checkEnding(word):
    candidates = []
    for rule in RULES:
        if ('??'  in rule):
            continue
        if word.endswith(rule['ending']):
            end_len = len(rule['ending'])
            candidates.append(word[:( - end_len)] + rule['correction'])
    return candidates
            